(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{61:function(e,t,n){e.exports=n(92)},66:function(e,t,n){},67:function(e,t,n){},85:function(e,t,n){},91:function(e,t,n){},92:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),s=n(7),i=n.n(s),l=(n(66),n(11)),c=n(12),o=n(20),u=n(21),m=n(22),h=(n(67),n(28)),v=n(34),d=n.n(v),g=function e(){var t=this;Object(l.a)(this,e),this.signup=function(e){var n=e.username,a=e.password;return t.service.post("/signup",{username:n,password:a}).then((function(e){return e.data}))},this.login=function(e){var n=e.username,a=e.password;return t.service.post("/login",{username:n,password:a}).then((function(e){return e.data}))},this.logout=function(){return t.service.post("/logout").then((function(e){return e.data}))},this.loggedin=function(){return t.service.get("/loggedin").then((function(e){return e.data}))},this.service=d.a.create({baseURL:"".concat("https://suma-voluntariado.herokuapp.com/api","/auth"),withCredentials:!0})},p=n(52),f=n(17),E=(n(85),function(e){function t(e){var n;return Object(l.a)(this,t),(n=Object(o.a)(this,Object(u.a)(t).call(this,e))).handleLogout=function(e){n.props.logout()},n.state={loggedInUser:null},n.authServices=new g,n}return Object(m.a)(t,e),Object(c.a)(t,[{key:"componentWillReceiveProps",value:function(e){this.setState(Object(p.a)({},this.state,{loggedInUser:e.userInSession}))}},{key:"render",value:function(){return this.state.loggedInUser?r.a.createElement("nav",{className:"navbar"},r.a.createElement("div",{className:"navbar-brand"},r.a.createElement("span",null,"+SUMA")),r.a.createElement("ul",null,r.a.createElement("li",null,r.a.createElement("span",null,"Bienvenido, ",r.a.createElement(f.b,{className:"nav-links",to:"/profile"},this.state.loggedInUser.username))),r.a.createElement("li",null,r.a.createElement(f.b,{className:"nav-links",to:"/",onClick:this.handleLogout},"Logout")))):r.a.createElement("div",null,r.a.createElement("nav",{className:"navbar"},r.a.createElement("div",{className:"navbar-brand"},r.a.createElement("span",null,"+SUMA")),r.a.createElement("ul",null,r.a.createElement("li",null,r.a.createElement(f.b,{className:"nav-links",to:"/signup"},"Reg\xedstrate")),r.a.createElement("li",null,r.a.createElement(f.b,{className:"nav-links",to:"/login"},"Inicia sesi\xf3n")))))}}]),t}(r.a.Component)),b=n(15),w=function(e){function t(e){var n;return Object(l.a)(this,t),(n=Object(o.a)(this,Object(u.a)(t).call(this,e))).handleChange=function(e){var t=e.target,a=t.name,r=t.value;n.setState(Object(b.a)({},a,r))},n.handleSubmit=function(e){e.preventDefault(),n.postUser()},n.postUser=function(){n.authServices.signup(n.state).then((function(e){n.setState({username:"",password:""}),n.props.setUser(e)})).catch((function(e){n.setState({username:n.state.username,password:n.state.password,error:!0})}))},n.state={username:"",password:""},n.authServices=new g,n}return Object(m.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement("h1",null,"Registro de usuarios"),r.a.createElement("form",{onSubmit:this.handleSubmit},r.a.createElement("label",null,"Usuario"),r.a.createElement("input",{type:"text",name:"username",value:this.state.username,onChange:this.handleChange}),r.a.createElement("label",null,"Contrase\xf1a"),r.a.createElement("input",{type:"password",name:"password",value:this.state.password,onChange:this.handleChange}),r.a.createElement("input",{type:"submit",value:"Registrarse"})),r.a.createElement("h1",null,this.state.error?"Error":""))}}]),t}(r.a.Component),S=n(123),U=n(121),O=n(122),j=(n(91),function(e){function t(e){var n;return Object(l.a)(this,t),(n=Object(o.a)(this,Object(u.a)(t).call(this,e))).handleChange=function(e){var t=e.target,a=t.name,r=t.value;n.setState(Object(b.a)({},a,r))},n.handleSubmit=function(e){e.preventDefault(),n.postUser()},n.postUser=function(){n.authServices.login(n.state).then((function(e){console.log(e),n.setState({username:"",password:""}),n.props.setUser(e),n.props.history.push("/")})).catch((function(e){n.setState({username:n.state.username,password:n.state.password,error:!0})}))},n.state={username:"",password:""},n.authServices=new g,n}return Object(m.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{className:"loginPage"},r.a.createElement("div",{className:"loginForm"},r.a.createElement("h1",null,"\xa1Nos encanta que vuelvas!"),r.a.createElement("form",{onSubmit:this.handleSubmit},r.a.createElement(S.a,{className:"formControl"},r.a.createElement(U.a,{label:"Usuario",variant:"outlined",color:"secondary",name:"username",value:this.state.username,onChange:this.handleChange,required:!0})),r.a.createElement(S.a,{className:"formControl"},r.a.createElement(U.a,{label:"Contrase\xf1a",variant:"outlined",color:"secondary",type:"password",name:"password",value:this.state.password,onChange:this.handleChange,required:!0})),r.a.createElement(O.a,{variant:"outlined",color:"secondary",size:"large",type:"submit"},"Iniciar sesi\xf3n")),r.a.createElement("span",{className:"linkSignUp"},"\xbfA\xfan no tienes una cuenta? ",r.a.createElement(f.b,{to:"/signup"},"Reg\xedstrate")),r.a.createElement("h1",null,this.state.error?"Error":"")))}}]),t}(r.a.Component)),A=function e(){var t=this;Object(l.a)(this,e),this.getAllActivities=function(){return t.service.get("/all").then((function(e){return e.data}))},this.getActivityDetails=function(e){return t.service.get("/".concat(e)).then((function(e){return e.data}))},this.createActivity=function(e){return t.service.post("/new",e).then((function(e){return e.data}))},this.service=d.a.create({baseURL:"".concat("https://suma-voluntariado.herokuapp.com/api","/activities"),withCredentials:!0})},C=function(e){function t(e){var n;return Object(l.a)(this,t),(n=Object(o.a)(this,Object(u.a)(t).call(this,e))).getAllActivities=function(){0===n.state.allActivities.length&&n.activitiesServices.getAllActivities().then((function(e){return n.setState({allActivities:e.allActivities})})).catch((function(e){return console.log(e)}))},n.componentDidMount=function(){return n.getAllActivities()},n.state={loggedInUser:null,allActivities:[]},n.activitiesServices=new A,n}return Object(m.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement("h1",null,"Est\xe1s en la Home"),this.state.allActivities.length?r.a.createElement("ul",null,this.state.allActivities.map((function(e){return r.a.createElement("li",null,r.a.createElement(f.b,{to:"/activities/".concat(e._id),key:e._id},e.title))}))):r.a.createElement("p",null,"CARGANDO..."))}}]),t}(r.a.Component),y=function(e){function t(e){var n;return Object(l.a)(this,t),(n=Object(o.a)(this,Object(u.a)(t).call(this,e))).componentDidMount=function(){return n.fetchUser()},n.setUser=function(e){n.setState({loggedInUser:e})},n.logout=function(){n.authServices.logout().then((function(){n.setState({loggedInUser:null})}))},n.state={loggedInUser:null},n.authServices=new g,n}return Object(m.a)(t,e),Object(c.a)(t,[{key:"fetchUser",value:function(){var e=this;return this.authServices.loggedin().then((function(t){e.setState({loggedInUser:t})})).catch((function(t){e.setState({loggedInUser:!1})}))}},{key:"render",value:function(){var e=this;return this.state.loggedInUser?r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"App"},r.a.createElement(E,{userInSession:this.state.loggedInUser,logout:this.logout}),r.a.createElement(C,null))):r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"App"},r.a.createElement(E,{userInSession:this.state.loggedInUser,logout:this.logout}),r.a.createElement(h.c,null,r.a.createElement(h.a,{exact:!0,path:"/signup",render:function(){return r.a.createElement(w,{setUser:e.setUser})}}),r.a.createElement(h.a,{exact:!0,path:"/login",render:function(){return r.a.createElement(j,{setUser:e.setUser})}}))))}}]),t}(r.a.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.render(r.a.createElement(f.a,null,r.a.createElement(y,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[61,1,2]]]);
//# sourceMappingURL=main.6be494b8.chunk.js.map